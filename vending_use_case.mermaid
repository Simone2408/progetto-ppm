graph TB
    %% Attori
    Admin((Admin))
    Worker((Worker))
    Customer((Customer))
    User((User))
    
    %% Use Cases - Autenticazione
    UC_Login[Login]
    UC_SignUp[Sign-Up]
    
    %% Use Cases - Gestione Vending Machine (Admin)
    UC1[Add Vending Machine]
    UC2[Update Vending Machine Details]
    UC3[Remove Vending Machine]
    UC4[View/Search Vending Machine]
    UC5[Manage Vending Machines CRUD]
    
    %% Use Cases - Gestione Items (Admin)
    UC6[View/Search Item]
    UC7[Add Item]
    UC8[Update Item]
    UC9[Remove Item]
    UC10[Manage Items CRUD]
    
    %% Use Cases - Gestione Users (Admin)
    UC11[Add Worker]
    UC12[Remove User]
    UC13[Update User Details]
    UC14[View/Search User]
    UC15[Manage User CRUD]
    
    %% Use Cases - Analytics e Performance (Admin)
    UC16[View Sales Analytics]
    UC17[View Machine Performance Analytics]
    
    %% Use Cases - Task Management
    UC18[Assign Task to Worker]
    UC19[View Assigned Tasks]
    UC20[View Task Details]
    UC21[Report Task Completion]
    
    %% Use Cases - Customer
    UC22[Buy Item]
    UC23[Connect to Vending Machine]
    UC24[Recharge Account]
    
    %% Connessioni User (Autenticazione)
    User --> UC_Login
    User --> UC_SignUp
    
    %% Connessioni Admin
    Admin --> UC5
    Admin --> UC10
    Admin --> UC15
    Admin --> UC16
    Admin --> UC17
    Admin --> UC18
    
    %% Connessioni Worker
    Worker --> UC19
    Worker --> UC20
    Worker --> UC21
    
    %% Connessioni Customer
    Customer --> UC22
    Customer --> UC23
    Customer --> UC24
    
    %% Include relationships per Vending Machine CRUD
    UC5 -.->|include| UC1
    UC5 -.->|include| UC2
    UC5 -.->|include| UC3
    UC5 -.->|include| UC4
    
    %% Include relationships per Items CRUD
    UC10 -.->|include| UC6
    UC10 -.->|include| UC7
    UC10 -.->|include| UC8
    UC10 -.->|include| UC9
    
    %% Include relationships per User CRUD
    UC15 -.->|include| UC11
    UC15 -.->|include| UC12
    UC15 -.->|include| UC13
    UC15 -.->|include| UC14
    
    %% Include relationship per Customer
    UC22 -.->|include| UC23
    
    %% Posizionamento per maggiore spazio
    subgraph " "
        Admin
        Worker
        Customer
        User
    end
    
    subgraph "Authentication"
        UC_Login
        UC_SignUp
    end
    
    subgraph "Admin Functions"
        UC5
        UC10
        UC15
        UC16
        UC17
        UC18
    end
    
    subgraph "Worker Functions"
        UC19
        UC20
        UC21
    end
    
    subgraph "Customer Functions"
        UC22
        UC23
        UC24
    end
    
    subgraph "Vending Machine Operations"
        UC1
        UC2
        UC3
        UC4
    end
    
    subgraph "Item Operations"
        UC6
        UC7
        UC8
        UC9
    end
    
    subgraph "User Operations"
        UC11
        UC12
        UC13
        UC14
    end
    
    %% Styling per dimensioni maggiori
    classDef actor fill:#e1f5fe,stroke:#01579b,stroke-width:3px,font-size:14px
    classDef usecase fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,font-size:12px
    classDef newfeature fill:#e8f5e8,stroke:#2e7d32,stroke-width:3px,font-size:12px
    classDef customer fill:#fff3e0,stroke:#e65100,stroke-width:2px,font-size:12px
    classDef auth fill:#f1f8e9,stroke:#33691e,stroke-width:2px,font-size:12px
    
    class Admin,Worker,Customer,User actor
    class UC1,UC2,UC3,UC4,UC5,UC6,UC7,UC8,UC9,UC10,UC11,UC12,UC13,UC14,UC15,UC16,UC17 usecase
    class UC18,UC19,UC20,UC21 newfeature
    class UC22,UC23,UC24 customer
    class UC_Login,UC_SignUp auth